!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("MyLib",[],t):"object"==typeof exports?exports.MyLib=t():e.MyLib=t()}(self,(()=>(()=>{"use strict";var e={114:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function u(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function o(e,t,r){e.width=t,e.height=r,e.style.width="".concat(t,"px"),e.style.height="".concat(r,"px")}Object.defineProperty(t,"__esModule",{value:!0}),t.input_mouse=t.input_key=t.canvas_input_create=t.canvas_create=t.canvas_resize=void 0,t.canvas_resize=o,t.canvas_create=function(e,t){void 0===e&&(e=300),void 0===t&&(t=150);var r=document.createElement("canvas");return o(r,e,t),r},t.canvas_input_create=function(e,t){void 0===t&&(t=!1);var o={mouse:{locked:!1,x:-1,y:-1,buttons:[!1,!1,!1]},keyboard:{keys:[]}};return e.oncontextmenu=function(e){return e.preventDefault()},e.onclick=function(){return function(e,t,o){o&&r(this,void 0,void 0,(function(){return n(this,(function(e){return[2,t.requestPointerLock()]}))}))}(0,e,t)},e.onmousedown=function(e){return function(e,t){e.mouse.buttons[t.button]=!0}(o,e)},e.onmouseup=function(e){return function(e,t){e.mouse.buttons[t.button]=!1}(o,e)},e.onmousemove=function(e){return function(e,t){var r=e.mouse;r.x=t.clientX,r.y=t.clientY}(o,e)},document.body.onkeydown=function(e){return function(e,t){var r=e.keyboard;r.keys.includes(t.key)||r.keys.push(t.key)}(o,e)},document.body.onkeyup=function(e){return function(e,t){var r=e.keyboard;r.keys.splice(r.keys.indexOf(t.key),1)}(o,e)},o},t.input_key=function(e,t){return e.keyboard.keys.includes(t)},t.input_mouse=function(e,t){return e.mouse.buttons[t]}},151:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context_get_webgl2=void 0,t.context_get_webgl2=function(e){var t=e.getContext("webgl2");if(!t)throw new Error("Could not create webgl2 context");return t}},61:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function u(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.image_create=void 0,t.image_create=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,new Promise((function(t){var r=new Image;r.onload=function(){return t(r)},r.src=e}))]}))}))}},524:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(114),t),o(r(151),t),o(r(61),t),o(r(675),t),o(r(655),t),o(r(522),t),o(r(69),t)},675:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function u(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function o(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,fetch(e)];case 1:return[4,t.sent().text()];case 2:return[2,t.sent()]}}))}))}function i(e,t,r){var n=e.createShader(r);if(!n)throw new Error("Could not create shader of type: ".concat(r));if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error("".concat(e.getShaderInfoLog(n)));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.program_uniform_location=t.program_create=void 0,t.program_create=function(e,t,a){return r(this,void 0,void 0,(function(){var r,u,c,f,l;return n(this,(function(n){switch(n.label){case 0:if(!(r=e.createProgram()))throw new Error("Could not create shader program");return[4,o(t)];case 1:return u=n.sent(),[4,o(a)];case 2:if(c=n.sent(),f=i(e,u,e.VERTEX_SHADER),l=i(e,c,e.FRAGMENT_SHADER),e.attachShader(r,f),e.attachShader(r,l),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error("".concat(e.getProgramInfoLog(r)));return e.deleteShader(f),e.deleteShader(l),[2,r]}}))}))},t.program_uniform_location=function(e,t,r){var n=e.getUniformLocation(t,r);if(!n)throw new Error("Could not find uniform location for name: ".concat(r));return n}},655:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.texture_create=void 0,t.texture_create=function(e,t){var r=e.createTexture();if(!r)throw new Error("Could not create texture");e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.generateMipmap(e.TEXTURE_2D);var n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");if(n){var o=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT);e.texParameterf(e.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,o)}return e.bindTexture(e.TEXTURE_2D,null),r}},522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vao_create=void 0,t.vao_create=function(e,t,r,n){var o=e.createVertexArray();if(!o)throw new Error("Could not create vertex array object");return e.bindVertexArray(o),e.useProgram(t),n.forEach((function(n){var o=n.buffer_index,i=n.location,a=n.size,u=n.stride,c=n.offset;e.bindBuffer(r[o][0],r[o][1]);var f=e.getAttribLocation(t,i);e.vertexAttribPointer(f,a,e.FLOAT,!1,u,c),e.enableVertexAttribArray(f)})),r.filter((function(t){return t[0]===e.ELEMENT_ARRAY_BUFFER})).forEach((function(t){e.bindBuffer(t[0],t[1])})),e.bindVertexArray(null),o}},69:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vbo_create=void 0,t.vbo_create=function(e,t,r,n){void 0===n&&(n=WebGLRenderingContext.STATIC_DRAW);var o=e.createBuffer();if(!o)throw new Error("Could not create buffer");return e.bindBuffer(t,o),e.bufferData(t,r,n),[t,o]}},156:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(524),t)}},t={};return function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(156)})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWE1SSxRQUdyQixJQUFJQyxFQUFTd0ksRUFBeUJFLEdBQVksQ0FHakQzSSxRQUFTLENBQUMsR0FPWCxPQUhBOEksRUFBb0JILEdBQVVJLEtBQUs5SSxFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTMEksR0FHcEV6SSxFQUFPRCxPQUNmLENDbkIwQjBJLENBQW9CLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9NeUxpYi93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vTXlMaWIvLi9zcmMvZ3JhcGhpY3MvY2FudmFzLnRzIiwid2VicGFjazovL015TGliLy4vc3JjL2dyYXBoaWNzL2NvbnRleHQudHMiLCJ3ZWJwYWNrOi8vTXlMaWIvLi9zcmMvZ3JhcGhpY3MvaW1hZ2UudHMiLCJ3ZWJwYWNrOi8vTXlMaWIvLi9zcmMvZ3JhcGhpY3MvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vTXlMaWIvLi9zcmMvZ3JhcGhpY3Mvc2hhZGVyLnRzIiwid2VicGFjazovL015TGliLy4vc3JjL2dyYXBoaWNzL3RleHR1cmUudHMiLCJ3ZWJwYWNrOi8vTXlMaWIvLi9zcmMvZ3JhcGhpY3MvdmFvLnRzIiwid2VicGFjazovL015TGliLy4vc3JjL2dyYXBoaWNzL3Ziby50cyIsIndlYnBhY2s6Ly9NeUxpYi8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9NeUxpYi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9NeUxpYi93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJNeUxpYlwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJNeUxpYlwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJNeUxpYlwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsICgpID0+IHtcbnJldHVybiAiLCJleHBvcnQgdHlwZSBLZXlib2FyZCA9IHtcbiAgICBrZXlzOiBBcnJheTxLZXlib2FyZEV2ZW50W1wia2V5XCJdPlxufVxuXG5leHBvcnQgdHlwZSBNb3VzZSA9IHtcbiAgICBsb2NrZWQ6IGJvb2xlYW5cbiAgICB4OiBudW1iZXJcbiAgICB5OiBudW1iZXJcbiAgICBidXR0b25zOiBbYm9vbGVhbiwgYm9vbGVhbiwgYm9vbGVhbl1cbn1cblxuZXhwb3J0IHR5cGUgSW5wdXQgPSB7XG4gICAga2V5Ym9hcmQ6IEtleWJvYXJkXG4gICAgbW91c2U6IE1vdXNlXG59XG5cbmZ1bmN0aW9uIGlucHV0X29uX2NsaWNrKGlucHV0OiBJbnB1dCwgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgcG9pbnRlcl9sb2NrOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKHBvaW50ZXJfbG9jaykgKGFzeW5jICgpID0+IGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2soKSkoKTtcbn1cblxuZnVuY3Rpb24gaW5wdXRfb25fbW91c2VfbW92ZSh7IG1vdXNlIH06IElucHV0LCBldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIG1vdXNlLnggPSBldmVudC5jbGllbnRYO1xuICAgIG1vdXNlLnkgPSBldmVudC5jbGllbnRZO1xufVxuXG5mdW5jdGlvbiBpbnB1dF9vbl9tb3VzZV9kb3duKHsgbW91c2UgfTogSW5wdXQsIGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgbW91c2UuYnV0dG9uc1tldmVudC5idXR0b25dID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaW5wdXRfb25fbW91c2VfdXAoeyBtb3VzZSB9OiBJbnB1dCwgZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBtb3VzZS5idXR0b25zW2V2ZW50LmJ1dHRvbl0gPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaW5wdXRfb25fa2V5X2Rvd24oeyBrZXlib2FyZCB9OiBJbnB1dCwgZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIWtleWJvYXJkLmtleXMuaW5jbHVkZXMoZXZlbnQua2V5KSkge1xuICAgICAgICBrZXlib2FyZC5rZXlzLnB1c2goZXZlbnQua2V5KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlucHV0X29uX2tleV91cCh7IGtleWJvYXJkIH06IElucHV0LCBldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGtleWJvYXJkLmtleXMuc3BsaWNlKGtleWJvYXJkLmtleXMuaW5kZXhPZihldmVudC5rZXkpLCAxKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbnZhc19yZXNpemUoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbnZhc19jcmVhdGUod2lkdGg6IG51bWJlciA9IDMwMCwgaGVpZ2h0OiBudW1iZXIgPSAxNTApOiBIVE1MQ2FudmFzRWxlbWVudCB7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICBjYW52YXNfcmVzaXplKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgcmV0dXJuIGNhbnZhcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbnZhc19pbnB1dF9jcmVhdGUoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgcG9pbnRlcl9sb2NrOiBib29sZWFuID0gZmFsc2UpOiBJbnB1dCB7XG4gICAgY29uc3QgaW5wdXQ6IElucHV0ID0ge1xuICAgICAgICBtb3VzZToge1xuICAgICAgICAgICAgbG9ja2VkOiBmYWxzZSxcbiAgICAgICAgICAgIHg6IC0xLFxuICAgICAgICAgICAgeTogLTEsXG4gICAgICAgICAgICBidXR0b25zOiBbZmFsc2UsIGZhbHNlLCBmYWxzZV0sXG4gICAgICAgIH0sXG4gICAgICAgIGtleWJvYXJkOiB7XG4gICAgICAgICAgICBrZXlzOiBbXVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNhbnZhcy5vbmNvbnRleHRtZW51ID0gKGV2ZW50KSA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNhbnZhcy5vbmNsaWNrID0gKCkgPT4gaW5wdXRfb25fY2xpY2soaW5wdXQsIGNhbnZhcywgcG9pbnRlcl9sb2NrKTtcbiAgICBjYW52YXMub25tb3VzZWRvd24gPSAoZXZlbnQpID0+IGlucHV0X29uX21vdXNlX2Rvd24oaW5wdXQsIGV2ZW50KTtcbiAgICBjYW52YXMub25tb3VzZXVwID0gKGV2ZW50KSA9PiBpbnB1dF9vbl9tb3VzZV91cChpbnB1dCwgZXZlbnQpO1xuICAgIGNhbnZhcy5vbm1vdXNlbW92ZSA9IChldmVudCkgPT4gaW5wdXRfb25fbW91c2VfbW92ZShpbnB1dCwgZXZlbnQpO1xuICAgIGRvY3VtZW50LmJvZHkub25rZXlkb3duID0gKGV2ZW50KSA9PiBpbnB1dF9vbl9rZXlfZG93bihpbnB1dCwgZXZlbnQpO1xuICAgIGRvY3VtZW50LmJvZHkub25rZXl1cCA9IChldmVudCkgPT4gaW5wdXRfb25fa2V5X3VwKGlucHV0LCBldmVudCk7XG5cbiAgICByZXR1cm4gaW5wdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnB1dF9rZXkoaW5wdXQ6IElucHV0LCBrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpbnB1dC5rZXlib2FyZC5rZXlzLmluY2x1ZGVzKGtleSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnB1dF9tb3VzZShpbnB1dDogSW5wdXQsIGJ1dHRvbjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlucHV0Lm1vdXNlLmJ1dHRvbnNbYnV0dG9uXTtcbn0iLCJleHBvcnQgZnVuY3Rpb24gY29udGV4dF9nZXRfd2ViZ2wyKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0IHtcbiAgICBjb25zdCBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2wyXCIpO1xuICAgIGlmICghZ2wpIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBjcmVhdGUgd2ViZ2wyIGNvbnRleHRcIik7XG4gICAgcmV0dXJuIGdsO1xufVxuIiwiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltYWdlX2NyZWF0ZShzb3VyY2VfdXJsOiBzdHJpbmcpOiBQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1hZ2UpO1xuICAgICAgICBpbWFnZS5zcmMgPSBzb3VyY2VfdXJsO1xuICAgIH0pO1xufVxuIiwiZXhwb3J0ICogZnJvbSBcIi4vY2FudmFzXCJcbmV4cG9ydCAqIGZyb20gXCIuL2NvbnRleHRcIlxuZXhwb3J0ICogZnJvbSBcIi4vaW1hZ2VcIlxuZXhwb3J0ICogZnJvbSBcIi4vc2hhZGVyXCJcbmV4cG9ydCAqIGZyb20gXCIuL3RleHR1cmVcIlxuZXhwb3J0ICogZnJvbSBcIi4vdmFvXCJcbmV4cG9ydCAqIGZyb20gXCIuL3Zib1wiIiwidHlwZSBTaGFkZXJUeXBlID0gV2ViR0xSZW5kZXJpbmdDb250ZXh0W1wiVkVSVEVYX1NIQURFUlwiXSB8IFdlYkdMUmVuZGVyaW5nQ29udGV4dFtcIkZSQUdNRU5UX1NIQURFUlwiXTtcblxuYXN5bmMgZnVuY3Rpb24gbG9hZF9maWxlKHVybDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIHJldHVybiBhd2FpdCByZXMudGV4dCgpO1xufVxuXG5mdW5jdGlvbiBzaGFkZXJfY29tcGlsZV9mcm9tX3NvdXJjZShcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LFxuICAgIHNvdXJjZTogc3RyaW5nLFxuICAgIHR5cGU6IFNoYWRlclR5cGVcbik6IFdlYkdMU2hhZGVyIHtcbiAgICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgaWYgKCFzaGFkZXIpIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGNyZWF0ZSBzaGFkZXIgb2YgdHlwZTogJHt0eXBlfWApO1xuXG4gICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcbiAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG5cbiAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkgdGhyb3cgbmV3IEVycm9yKGAke2dsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKX1gKTtcbiAgICByZXR1cm4gc2hhZGVyO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvZ3JhbV9jcmVhdGUoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCxcbiAgICB2ZXJ0ZXhfc291cmNlX3VybDogc3RyaW5nLFxuICAgIGZyYWdtZW50X3NvdXJjZV91cmw6IHN0cmluZ1xuKTogUHJvbWlzZTxXZWJHTFByb2dyYW0+IHtcbiAgICBjb25zdCBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuICAgIGlmICghcHJvZ3JhbSkgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSBzaGFkZXIgcHJvZ3JhbVwiKTtcbiAgICBjb25zdCB2ZXJ0ZXhfc291cmNlID0gYXdhaXQgbG9hZF9maWxlKHZlcnRleF9zb3VyY2VfdXJsKTtcbiAgICBjb25zdCBmcmFnbWVudF9zb3VyY2UgPSBhd2FpdCBsb2FkX2ZpbGUoZnJhZ21lbnRfc291cmNlX3VybCk7XG4gICAgY29uc3QgdmVydGV4X3NoYWRlciA9IHNoYWRlcl9jb21waWxlX2Zyb21fc291cmNlKGdsLCB2ZXJ0ZXhfc291cmNlLCBnbC5WRVJURVhfU0hBREVSKTtcbiAgICBjb25zdCBmcmFnbWVudF9zaGFkZXIgPSBzaGFkZXJfY29tcGlsZV9mcm9tX3NvdXJjZShnbCwgZnJhZ21lbnRfc291cmNlLCBnbC5GUkFHTUVOVF9TSEFERVIpO1xuXG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleF9zaGFkZXIpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudF9zaGFkZXIpO1xuICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuXG4gICAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Z2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSl9YCk7XG4gICAgfVxuXG4gICAgZ2wuZGVsZXRlU2hhZGVyKHZlcnRleF9zaGFkZXIpO1xuICAgIGdsLmRlbGV0ZVNoYWRlcihmcmFnbWVudF9zaGFkZXIpO1xuICAgIHJldHVybiBwcm9ncmFtO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvZ3JhbV91bmlmb3JtX2xvY2F0aW9uKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgbmFtZTogc3RyaW5nKTogV2ViR0xVbmlmb3JtTG9jYXRpb24ge1xuICAgIGNvbnN0IGxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIG5hbWUpO1xuICAgIGlmICghbG9jYXRpb24pIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgdW5pZm9ybSBsb2NhdGlvbiBmb3IgbmFtZTogJHtuYW1lfWApO1xuICAgIHJldHVybiBsb2NhdGlvbjtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiB0ZXh0dXJlX2NyZWF0ZShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBpbWFnZTogSFRNTEltYWdlRWxlbWVudCk6IFdlYkdMVGV4dHVyZSB7XG4gICAgY29uc3QgdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICBpZiAoIXRleHR1cmUpIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBjcmVhdGUgdGV4dHVyZVwiKTtcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcblxuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5ORUFSRVNUKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG5cbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGltYWdlKTtcbiAgICBnbC5nZW5lcmF0ZU1pcG1hcChnbC5URVhUVVJFXzJEKTtcblxuICAgIGNvbnN0IGV4dCA9XG4gICAgICAgIGdsLmdldEV4dGVuc2lvbihcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKSB8fFxuICAgICAgICBnbC5nZXRFeHRlbnNpb24oXCJNT1pfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpIHx8XG4gICAgICAgIGdsLmdldEV4dGVuc2lvbihcIldFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIik7XG5cbiAgICBpZiAoZXh0KSB7XG4gICAgICAgIGNvbnN0IG1heCA9IGdsLmdldFBhcmFtZXRlcihleHQuTUFYX1RFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhUKTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyZihnbC5URVhUVVJFXzJELCBleHQuVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQsIG1heCk7XG4gICAgfVxuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgcmV0dXJuIHRleHR1cmU7XG59IiwiaW1wb3J0IHsgVGFyZ2V0IH0gZnJvbSBcIi4vdmJvXCI7XG5cbmV4cG9ydCB0eXBlIEF0dHJpYnV0ZSA9IHtcbiAgICBsb2NhdGlvbjogc3RyaW5nXG4gICAgc2l6ZTogbnVtYmVyXG4gICAgc3RyaWRlOiBudW1iZXJcbiAgICBvZmZzZXQ6IG51bWJlclxuICAgIGJ1ZmZlcl9pbmRleDogbnVtYmVyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YW9fY3JlYXRlKFxuICAgIGdsOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LFxuICAgIHByb2dyYW06IFdlYkdMUHJvZ3JhbSxcbiAgICB2Ym9zOiBbVGFyZ2V0LCBXZWJHTEJ1ZmZlcl1bXSxcbiAgICBhdHRyaWJ1dGVzOiBBdHRyaWJ1dGVbXVxuKTogV2ViR0xWZXJ0ZXhBcnJheU9iamVjdCB7XG4gICAgY29uc3QgdmFvID0gZ2wuY3JlYXRlVmVydGV4QXJyYXkoKTtcbiAgICBpZiAoIXZhbykgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSB2ZXJ0ZXggYXJyYXkgb2JqZWN0XCIpO1xuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh2YW8pO1xuICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XG5cbiAgICBhdHRyaWJ1dGVzLmZvckVhY2goKHsgYnVmZmVyX2luZGV4LCBsb2NhdGlvbiwgc2l6ZSwgc3RyaWRlLCBvZmZzZXQgfSkgPT4ge1xuICAgICAgICBnbC5iaW5kQnVmZmVyKHZib3NbYnVmZmVyX2luZGV4XVswXSwgdmJvc1tidWZmZXJfaW5kZXhdWzFdKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBsb2NhdGlvbik7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoaW5kZXgsIHNpemUsIGdsLkZMT0FULCBmYWxzZSwgc3RyaWRlLCBvZmZzZXQpO1xuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShpbmRleCk7XG4gICAgfSk7XG5cbiAgICB2Ym9zLmZpbHRlcih2Ym8gPT4gdmJvWzBdID09PSBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUilcbiAgICAgICAgLmZvckVhY2godmJvID0+IHtcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIodmJvWzBdLCB2Ym9bMV0pO1xuICAgICAgICB9KTtcblxuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheShudWxsKTtcbiAgICByZXR1cm4gdmFvO1xufVxuIiwiZXhwb3J0IHR5cGUgVGFyZ2V0ID0gV2ViR0xSZW5kZXJpbmdDb250ZXh0W1wiQVJSQVlfQlVGRkVSXCJdIHwgV2ViR0xSZW5kZXJpbmdDb250ZXh0W1wiRUxFTUVOVF9BUlJBWV9CVUZGRVJcIl07XG5leHBvcnQgdHlwZSBVc2FnZSA9IFdlYkdMUmVuZGVyaW5nQ29udGV4dFtcIlNUQVRJQ19EUkFXXCJdIHwgV2ViR0xSZW5kZXJpbmdDb250ZXh0W1wiRFlOQU1JQ19EUkFXXCJdXG5cbmV4cG9ydCBmdW5jdGlvbiB2Ym9fY3JlYXRlKFxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXG4gICAgdGFyZ2V0OiBUYXJnZXQsXG4gICAgZGF0YTogQXJyYXlCdWZmZXIsXG4gICAgdXNhZ2U6IFVzYWdlID0gV2ViR0xSZW5kZXJpbmdDb250ZXh0W1wiU1RBVElDX0RSQVdcIl1cbik6IFtUYXJnZXQsIFdlYkdMQnVmZmVyXSB7XG4gICAgY29uc3QgdmJvID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgaWYgKCF2Ym8pIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBjcmVhdGUgYnVmZmVyXCIpO1xuICAgIGdsLmJpbmRCdWZmZXIodGFyZ2V0LCB2Ym8pO1xuICAgIGdsLmJ1ZmZlckRhdGEodGFyZ2V0LCBkYXRhLCB1c2FnZSk7XG4gICAgcmV0dXJuIFt0YXJnZXQsIHZib107XG59XG5cbiIsImV4cG9ydCAqIGZyb20gXCIuL2dyYXBoaWNzXCIiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nik7XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsImNhbnZhc19yZXNpemUiLCJjYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsInN0eWxlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicG9pbnRlcl9sb2NrIiwiaW5wdXQiLCJtb3VzZSIsImxvY2tlZCIsIngiLCJ5IiwiYnV0dG9ucyIsImtleWJvYXJkIiwia2V5cyIsIm9uY29udGV4dG1lbnUiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwib25jbGljayIsInJlcXVlc3RQb2ludGVyTG9jayIsImlucHV0X29uX2NsaWNrIiwib25tb3VzZWRvd24iLCJidXR0b24iLCJpbnB1dF9vbl9tb3VzZV9kb3duIiwib25tb3VzZXVwIiwiaW5wdXRfb25fbW91c2VfdXAiLCJvbm1vdXNlbW92ZSIsImNsaWVudFgiLCJjbGllbnRZIiwiaW5wdXRfb25fbW91c2VfbW92ZSIsImJvZHkiLCJvbmtleWRvd24iLCJpbmNsdWRlcyIsImtleSIsInB1c2giLCJpbnB1dF9vbl9rZXlfZG93biIsIm9ua2V5dXAiLCJzcGxpY2UiLCJpbmRleE9mIiwiaW5wdXRfb25fa2V5X3VwIiwiZ2wiLCJnZXRDb250ZXh0IiwiRXJyb3IiLCJzb3VyY2VfdXJsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJpbWFnZSIsIkltYWdlIiwib25sb2FkIiwic3JjIiwibG9hZF9maWxlIiwidXJsIiwiZmV0Y2giLCJ0ZXh0Iiwic2hhZGVyX2NvbXBpbGVfZnJvbV9zb3VyY2UiLCJzb3VyY2UiLCJ0eXBlIiwic2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwic2hhZGVyU291cmNlIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwiZ2V0U2hhZGVySW5mb0xvZyIsInZlcnRleF9zb3VyY2VfdXJsIiwiZnJhZ21lbnRfc291cmNlX3VybCIsInByb2dyYW0iLCJjcmVhdGVQcm9ncmFtIiwidmVydGV4X3NvdXJjZSIsImZyYWdtZW50X3NvdXJjZSIsInZlcnRleF9zaGFkZXIiLCJWRVJURVhfU0hBREVSIiwiZnJhZ21lbnRfc2hhZGVyIiwiRlJBR01FTlRfU0hBREVSIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJnZXRQcm9ncmFtSW5mb0xvZyIsImRlbGV0ZVNoYWRlciIsIm5hbWUiLCJsb2NhdGlvbiIsImdldFVuaWZvcm1Mb2NhdGlvbiIsInRleHR1cmUiLCJjcmVhdGVUZXh0dXJlIiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwidGV4UGFyYW1ldGVyaSIsIlRFWFRVUkVfV1JBUF9TIiwiQ0xBTVBfVE9fRURHRSIsIlRFWFRVUkVfV1JBUF9UIiwiVEVYVFVSRV9NSU5fRklMVEVSIiwiTkVBUkVTVCIsIlRFWFRVUkVfTUFHX0ZJTFRFUiIsInRleEltYWdlMkQiLCJSR0JBIiwiVU5TSUdORURfQllURSIsImdlbmVyYXRlTWlwbWFwIiwiZXh0IiwiZ2V0RXh0ZW5zaW9uIiwibWF4IiwiZ2V0UGFyYW1ldGVyIiwiTUFYX1RFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhUIiwidGV4UGFyYW1ldGVyZiIsIlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhUIiwidmJvcyIsImF0dHJpYnV0ZXMiLCJ2YW8iLCJjcmVhdGVWZXJ0ZXhBcnJheSIsImJpbmRWZXJ0ZXhBcnJheSIsInVzZVByb2dyYW0iLCJmb3JFYWNoIiwiYnVmZmVyX2luZGV4Iiwic2l6ZSIsInN0cmlkZSIsIm9mZnNldCIsImJpbmRCdWZmZXIiLCJpbmRleCIsImdldEF0dHJpYkxvY2F0aW9uIiwidmVydGV4QXR0cmliUG9pbnRlciIsIkZMT0FUIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJmaWx0ZXIiLCJ2Ym8iLCJFTEVNRU5UX0FSUkFZX0JVRkZFUiIsInRhcmdldCIsImRhdGEiLCJ1c2FnZSIsIldlYkdMUmVuZGVyaW5nQ29udGV4dCIsImNyZWF0ZUJ1ZmZlciIsImJ1ZmZlckRhdGEiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=